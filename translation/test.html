<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <title data-i18n="title">Welcome to Our Website</title>
</head>

<body>
    <select id="language-selector">
        <option value="en">English</option>
        <option value="es">Espa√±ol</option>
    </select>

    <h1 data-i18n="cta"></h1>
    <p data-i18n="about"></p>
    
    <h2 data-i18n="level_set_header"></h2>
    <p data-i18n="level_set_body"></p>

    <h2 data-i18n="instructions_header"></h2>
    <p data-i18n="instructions_body"></p>

    <h2 data-i18n="get_started"></h2>
</body>

<!-- JS BELOW -->

<script type = "text/javascript">

var intro = {
    en: {
        "cta": "Learn your next steps for receiving $120 for groceries this summer",
        "about": "The Nebraska Summer EBT (S-EBT) Eligibility Checker will ask you a few questions about your child to help you understand if you will receive $120 automatically or if you will need to apply.",
        "level_set_header": "Before you get started on this form",
        "level_set_body": "It will take most people less than two minutes to complete this form. You will not need to provide any sensitive information about your child, but you may be asked if your child: \n <ul> \n <li>is enrolled in programs like SNAP<\/li> \n <li>Has been approved for free or reduced-price school meals<\/li> \n <li>Has a household income that is eligible to receive Summer EBT<\/li> \n <\/ul> \n <br /> \n\n This form does <em>not<\/em> save your answers, and your answers will not be shared with anyone.",
        "instructions_header": "How to complete this form",
        "instructions_body": "For each question, tap/click the radio button ( <input type=\"radio\" /> ) or checkboxes ( <input type=\"checkbox\" /> ) that best describe your child, and then tap/click the \"next question\" button. If you need to change your answer to a previous question, tap/click the \"go back\" button.",
        "get_started": "Tap or click the \"next question\" button to get started!"
    },
    es: {
        "cta": "Lorem ipsum dolor sit amet.",
        "about": "Quo quae galisum ad rerum provident est dolores quis sed praesentium perferendis quo impedit explicabo et cumque error et porro laborum.",
        "level_set_header": "Ea galisum galisum qui similique ducimus cum sint perferendis qui quaerat officiis in internos facere ex provident quisquam eum voluptatum deserunt!",
        "level_set_body": "Sed galisum libero qui provident natus et dolore voluptates!",
        "instructions_header": "Ut galisum dolor ad error repudiandae id maxime dolorem quo quia maiores qui excepturi tempore.",
        "instructions_body": "Est expedita possimus aut voluptatem dolore aut repellendus ipsum non dolor voluptatum ab quibusdam eaque.",
        "get_started": "Non error maiores qui dignissimos quibusdam ut rerum sapiente ut natus earum a quia blanditiis ea incidunt minus est totam corrupti."
    } 
};

const languageSelector = document.getElementById("language-selector");

// Load default language
window.addEventListener("DOMContentLoaded", () => {
    const defaultLang = "en";    // or detect from browser
    languageSelector.value = defaultLang;
    loadLanguage(defaultLang);
});

languageSelector.addEventListener("change", (e) => {
    const selectedLang = e.target.value;
    loadLanguage(selectedLang);
});

function loadLanguage(lang) {
    document.querySelectorAll("[data-i18n]").forEach(el => {
        var intro_element_name = el.getAttribute("data-i18n");
        el.innerHTML = intro[lang][intro_element_name];
        // const keys = el.getAttribute("data-i18n").split('.');
        // el.innerText = text;
    });
};

    // async function loadLanguage(lang) {
    //     try {
    //         const response = await fetch(`intro[${lang}].json`);
    //         translations = await response.json();
    //         updateText();
    //     } catch (error) {
    //         console.error(`Error loading ${lang} language file:`, error);
    //     }
    // }

    // function updateText() {
    //     document.querySelectorAll("[data-i18n]").forEach(el => {
    //         const keys = el.getAttribute("data-i18n").split('.');
    //         let text = translations;
    //         for (let key of keys) {
    //             if (text[key]) {
    //                 text = text[key];
    //             } else {
    //                 text = null;
    //                 break;
    //             }
    //         }
    //         if (text) {
    //             el.innerText = text;
    //         }
    //     });
    // }

    // languageSelector.addEventListener("change", (e) => {
    //     const selectedLang = e.target.value;
    //     loadLanguage(selectedLang);
    // });

    // // Load default language
    // window.addEventListener("DOMContentLoaded", () => {
    //     const defaultLang = "en";    // or detect from browser
    //     languageSelector.value = defaultLang;
    //     loadLanguage(defaultLang);
    // });

</script>

</html>
